(this["webpackJsonpelements-frontend"]=this["webpackJsonpelements-frontend"]||[]).push([[0],{127:function(e,t,a){e.exports=a.p+"static/media/elements.b15f934a.svg"},145:function(e,t,a){e.exports=a(223)},154:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},223:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),o=a.n(r),i=a(29),l=(a(154),a(27)),s=a(28),u=a(31),f=a(30),d=a(71),v=a(230),E=a(91),h=a(67),b=a.n(h),p=a(80),m=a(141),C=a(231),O=a(53),g=a.n(O),j=a(124),_=a.n(j),S=a(105),y={name:"Data Transfer Service",uuid:"5cf052d0-2403-4719-a558-b7e72c48112f",description:"Provide data receive and transmitting of a data",characteristics:[{name:"Data Receive",uuid:"5cf052d1-2403-4719-a558-b7e72c48112f",description:"Receive data channel",properties:["write"]},{name:"Data Transmit",uuid:"5cf052d2-2403-4719-a558-b7e72c48112f",description:"Transmit data channel",properties:["read","notify"]},{name:"Control Receive",uuid:"5cf052d3-2403-4719-a558-b7e72c48112f",description:"Control data receive channel",properties:["write"]},{name:"Control Transmit",uuid:"5cf052d4-2403-4719-a558-b7e72c48112f",description:"Control data transmit channel",properties:["read","notify"]},{name:"Status",uuid:"5cf052d5-2403-4719-a558-b7e72c48112f",description:"Expose status of transfer data",properties:["write","read","notify"]}]};g.a.defaults.baseURL="https://portal.pipe.today/api";var T,k,R=Object(C.a)("SHOW_APP_PRELOADER"),w=Object(C.a)("FETCH_TOKEN_REQUEST"),D=Object(C.a)("FETCH_TOKEN_SUCCESS"),I=Object(C.a)("FETCH_TOKEN_FAILURE"),U=function(e){return function(t){t(w()),g.a.post("oauth/convert-token/",{grant_type:"convert_token",client_id:"qxN1hlSy0GbXqE6au6Hd63N4YOWK6WCP2TuXWzaO",backend:"google-oauth2",token:e}).then((function(e){!function(e,t,a){var n=new S.a,c=new Date;c.setSeconds(c.getSeconds()+a),n.set(t,JSON.stringify(e),{path:"/",expires:c})}(e.data,"auth_cookie",e.data.expires_in),t(D(e.data))})).catch((function(){t(I())}))}},A=Object(C.a)("FETCH_RECIPES_REQUEST"),V=Object(C.a)("FETCH_RECIPES_SUCCESS"),F=Object(C.a)("FETCH_RECIPES_FAILURE"),N=function(){return function(e){e(A()),e(R(!0)),g.a.get("recipe/").then((function(t){e(V(t.data)),e(R(!1))})).catch((function(){e(F()),e(R(!1))}))}},B=(Object(C.a)("FETCH_USER_REQUEST"),Object(C.a)("FETCH_USER_SUCCESS")),L=Object(C.a)("FETCH_USER_FAILURE"),H=function(){return function(e,t){e(A()),e(R(!0));var a=t().auth.cookie.access_token;g.a.get("user/",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){e(B(t.data)),e(R(!1))})).catch((function(t){switch(e(L()),e(R(!1)),t.response.status){case 403:Object(d.d)("/")}}))}},P=(Object(C.a)("FETCH_USER_DEVICES_REQUEST"),Object(C.a)("FETCH_USER_DEVICES_SUCCESS")),x=Object(C.a)("FETCH_USER_DEVICES_FAILURE"),G=Object(C.a)("SAVE_DEVICE_REQUEST"),Q=Object(C.a)("SAVE_DEVICE_SUCCESS"),M=Object(C.a)("SAVE_DEVICE_FAILURE"),q=(Object(C.a)("REMOVE_DEVICE_REQUEST"),Object(C.a)("REMOVE_DEVICE_SUCCESS")),W=Object(C.a)("REMOVE_DEVICE_FAILURE"),Y=Object(C.a)("CONNECT_TO_DEVICE_REQUEST"),z=Object(C.a)("CONNECT_TO_DEVICE_SUCCESS"),K=Object(C.a)("CONNECT_TO_DEVICE_FAILURE"),J=Object(C.a)("CONNECT_GATT_REQUEST"),X=Object(C.a)("CONNECT_GATT_SUCCESS"),Z=Object(C.a)("CONNECT_GATT_FAILURE"),$=function(e){return function(t){t(Y());var a=e;navigator.bluetooth.requestDevice({acceptAllDevices:!a||void 0,filters:a,optionalServices:["5cf052d0-2403-4719-a558-b7e72c48112f","battery_service",10793,6154]}).then((function(e){return console.log("device",e),t(z(e)),t(function(e){return function(t,a){var n=a(),c=n.auth.cookie.access_token,r=n.data.userDevices.devices,o=_.a.uniqBy([].concat(Object(m.a)(r),[{name:e.name,uid:e.id}]),"uid");if(o.length===r.length)return!1;t(G()),t(R(!0)),g.a.put("user/devices/",{devices:o},{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){t(Q(e.data)),t(R(!1))})).catch((function(){t(M()),t(R(!1))}))}}(e)),t(J()),e.gatt.connect()})).catch((function(){t(K())})).then((function(e){t(X(e))})).catch((function(){t(Z())}))}},ee=Object(C.a)("FETCH_BATTERY_SERVICE_REQUEST"),te=Object(C.a)("FETCH_BATTERY_SERVICE_SUCCESS"),ae=Object(C.a)("FETCH_BATTERY_SERVICE_FAILURE"),ne=(Object(C.a)("FETCH_BATTERY_CHARACTERISTIC_SUCCESS"),Object(C.a)("FETCH_DEVICE_INFO_REQUEST")),ce=Object(C.a)("FETCH_DEVICE_INFO_SUCCESS"),re=Object(C.a)("FETCH_DEVICE_INFO_FAILURE"),oe=Object(C.a)("FETCH_DEVICE_INFO_CHARACTERISTIC_SUCCESS"),ie=Object(C.a)("GET_BINARY_RECIPE_REQUEST"),le=Object(C.a)("GET_BINARY_RECIPE_SUCCESS"),se=Object(C.a)("GET_BINARY_RECIPE_FAILURE"),ue=(Object(C.a)("WRITE_RECIPE_TO_DEVICE_REQUEST"),Object(C.a)("WRITE_RECIPE_TO_DEVICE_SUCCESS"),Object(C.a)("WRITE_RECIPE_TO_DEVICE_FAILURE"),Object(C.a)("RECIPE_BYTE_TRANSFERED")),fe=0,de=null,ve=function(){return function(e,t){var a=t(),n=a.bluetooth.server,c=a.data.recipeBinary,r=null;function o(e){var t=e.target.value.getUint8(0);console.log("handleResponseControlMsg",10===t,t),10===t?r.getCharacteristic("5cf052d5-2403-4719-a558-b7e72c48112f").then((function(e){return e.startNotifications(),e.addEventListener("characteristicvaluechanged",i),r.getCharacteristic("5cf052d1-2403-4719-a558-b7e72c48112f")})).then((function(e){de=e,l()})):15===t?console.log("Recipe did saved"):console.log("")}function i(e){var t=e.target.value;console.log("handleStatusChanged",t,t.getUint8(0)),l()}function l(){return s.apply(this,arguments)}function s(){return(s=Object(p.a)(b.a.mark((function t(){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("sendingData..."),a=0;case 2:if(!(fe<c.buffer.byteLength&&a<400)){t.next=10;break}return t.next=5,de.writeValue(c.buffer.slice(fe,fe+20));case 5:e(ue(c.buffer.slice(fe,fe+20).byteLength)),console.log("DataBuffer",c.buffer.slice(fe,fe+20));case 7:fe+=20,a+=20,t.next=2;break;case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n.getPrimaryService(y.uuid).then((function(e){return(r=e).getCharacteristic("5cf052d4-2403-4719-a558-b7e72c48112f")})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",o),console.log("\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 Control Transmit"),r.getCharacteristic("5cf052d3-2403-4719-a558-b7e72c48112f")})).then((function(e){console.log("characteristic Control Receive");var t=new ArrayBuffer(20);new DataView(t).setInt8(0,10,!0),new DataView(t).setInt8(1,255,!0),new DataView(t).setInt32(2,9012,!0),new DataView(t).setInt16(6,0,!0),console.log("Control Receive",new DataView(t).getInt8(0)),e.writeValue(new Int8Array(t))})).catch((function(e){alert(e)}))}},Ee=(a(175),a(176),function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"loader__container"},c.a.createElement("div",{className:"loader"},c.a.createElement("div",{className:"lds-ripple"},c.a.createElement("div",null),c.a.createElement("div",null))))}}]),a}(n.Component)),he=a(125),be=a.n(he),pe={convertToken:U},me=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).responseGoogleRequest=function(){},e.responseGoogleSuccess=function(t){(0,e.props.convertToken)(t.accessToken)},e.responseGoogleFailure=function(){},e}return Object(s.a)(a,[{key:"render",value:function(){return c.a.createElement(be.a,{clientId:"205221816405-0lvlolma2t1lvif67t749qee7h9te473.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogleSuccess,onFailure:this.responseGoogleFailure,onRequest:this.responseGoogleRequest,cookiePolicy:"single_host_origin"})}}]),a}(n.Component),Ce=(Object(i.b)((function(e){return{token:e.auth.token}}),pe)(me),a(126)),Oe=a.n(Ce),ge={convertToken:U},je=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"responseFacebook",value:function(e){console.log(e)}},{key:"render",value:function(){return c.a.createElement(Oe.a,{appId:"369580627566109",autoLoad:!0,fields:"name,email,picture",callback:this.responseFacebook})}}]),a}(n.Component),_e=Object(i.b)((function(e){return{token:e.auth.token}}),ge)(je),Se=a(127),ye=a.n(Se),Te={convertToken:U},ke=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){this.props.isLogged;return c.a.createElement("div",{className:"App",path:"/"},c.a.createElement("header",{className:"App-header"},c.a.createElement("img",{src:ye.a,className:"App-logo",alt:"logo"}),c.a.createElement("p",null,"App for test BLE ",c.a.createElement("u",null,"Web connect")),c.a.createElement(_e,null)))}}]),a}(n.Component),Re=Object(i.b)((function(e){return{token:e.auth.token}}),Te)(ke),we=a(226),De=a(103),Ie=a(229),Ue=a(235),Ae=a(236),Ve=(a(177),a(48)),Fe=a(225),Ne=a(224),Be=a(228),Le=a(73),He=a(88),Pe=a(232),xe=a(233),Ge=a(234),Qe={connectToDevice:$,batteryServiceAction:function(){return function(e,t){function a(t){e(te({level:t.target.value.getUint8(0)}))}e(ee()),t().bluetooth.server.getPrimaryService("battery_service").then((function(t){return e(te()),t.getCharacteristic("battery_level")})).catch((function(){e(ae())})).then((function(e){if(e)return e.startNotifications(),e.addEventListener("characteristicvaluechanged",a),e.readValue();throw new Error("characteristic baterry level not found")})).then((function(t){console.log("fetchBatteryServiceSuccess",t.getUint8(0)),e(te({level:t.getUint8(0)}))})).catch((function(){}))}},deviceInfoServiceAction:function(){return function(e,t){e(ne()),t().bluetooth.server.getPrimaryService(6154).then((function(t){return e(ce()),t.getCharacteristic(10793)})).catch((function(){e(re())})).then((function(e){if(e)return e.readValue();throw new Error("characteristic manufacturerName not found")})).then((function(t){e(oe({manufacturerName:t.getUint8(0)}))})).catch((function(){}))}},writeRecipeToDevice:ve},Me=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={bluetoothDevice:null,batteryLevelCharacteristic:null,gattServer:null,transferService:null,characteristic:null},e.connectToDevice=function(){navigator.bluetooth.requestDevice({filters:[{name:"BlueNRG"},{services:["5cf052d0-2403-4719-a558-b7e72c48112f"]}],optionalServices:["5cf052d0-2403-4719-a558-b7e72c48112f"]}).then((function(t){console.log("device",t),e.setState({bluetoothDevice:t}),e.state.bluetoothDevice.addEventListener("gattserverdisconnected",e.onDisconnected)})).catch((function(e){console.log("error",e)}))},e.serviceConnect=function(t){var a=e.props.server;console.log("serviceConnect",a),a.getPrimaryService(t).then((function(t){console.log("service",t),e.setState({transferService:t})})).catch((function(e){alert(e)}))},e.CtrlRxCharacteristicUuid=function(){var t=new ArrayBuffer(20);new DataView(t).setInt8(0,10),new DataView(t).setInt8(1,255),new DataView(t).setInt32(2,800),new DataView(t).setInt16(6,6),console.log("BUFFER",t,new DataView(t)),e.state.transferService.getCharacteristic("5cf052d3-2403-4719-a558-b7e72c48112f").then((function(e){return console.log("characteristic Control Receive"),e.writeValue(t)})).then((function(e){console.log("Control Receive value: ",e)})).catch((function(e){alert(e)}))},e.sendDataToDevice=function(){var t=new ArrayBuffer(20);new DataView(t).setInt32(0,6e3),e.state.transferService.getCharacteristic("5cf052d1-2403-4719-a558-b7e72c48112f").then((function(e){console.log("characteristic Data Receive",t);var a=null;function n(){return(n=Object(p.a)(b.a.mark((function n(){var c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c=0;case 1:if(!(c<800)){n.next=9;break}return n.next=4,e.writeValue(t);case 4:a=n.sent,console.log("sendingData",a);case 6:c+=20,n.next=1;break;case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()})).catch((function(e){alert(e)}))},e.CtrlTxCharacteristicUuid=function(){e.state.transferService.getCharacteristic("5cf052d4-2403-4719-a558-b7e72c48112f").then((function(e){return e.startNotifications()})).then((function(t){t.addEventListener("characteristicvaluechanged",e.handleResponseControlMsg),console.log("\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 Control Transmit")})).catch((function(e){alert(e)}))},e.StatusCharacteristicUuid=function(){e.state.transferService.getCharacteristic("5cf052d5-2403-4719-a558-b7e72c48112f").then((function(t){return console.log("characteristic \u0421\u0442\u0430\u0442\u0443\u0441",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleLevelChanged),t.readValue()})).then((function(e){console.log("\u0421\u0442\u0430\u0442\u0443\u0441 value: ",e)}))},e.batteryLevel=function(){e.state.transferService.getCharacteristic("battery_level").then((function(t){return console.log("characteristic \u0421\u0442\u0430\u0442\u0443\u0441",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleLevelChanged),t.readValue()})).then((function(e){console.log("\u0417\u0430\u0440\u044f\u0434 \u0431\u0430\u0442\u0430\u0440\u0435\u0438",e.buffer)}))},e}return Object(s.a)(a,[{key:"connect",value:function(){var e=this;return this.state.bluetoothDevice.gatt.connect().then((function(t){console.log("server",t),e.setState({gattServer:t})})).catch((function(e){alert(e)}))}},{key:"handleResponseControlMsg",value:function(e){var t=e.target.value.getUint8(0);console.log("handleResponseControlMsg",10===t)}},{key:"handleLevelChanged",value:function(e){var t=e.target.value;console.log("handleStatusChanged",t,t.buffer)}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.bluetooth,n=a.device,c=a.server,r=a.batteryService,o=t.batteryServiceAction;n&&c&&!r&&(console.log("Need request battery service"),o());var i=this.props,l=i.recipeBinary,s=i.writeRecipeToDevice;l!==e.recipeBinary&&(console.log("Recipe binary not same"),l.binary_recipe&&s())}},{key:"render",value:function(){return c.a.createElement("div",null)}}]),a}(n.Component),qe=Object(i.b)((function(e){var t=e.auth.token,a=e.data.recipeBinary,n=e.data,c=e.bluetooth,r=e.bluetooth;return{token:t,device:r.device,bluetooth:c,server:r.server,recipeBinary:a,data:n}}),Qe)(Me),We={convertToken:U,recipe:N,user:H,connectToDevice:$,removeDevice:function(e){return function(t,a){var n=a(),c=n.auth.cookie.access_token,r=n.data.userDevices.devices.filter((function(t){return t.uid!==e}));t(G()),t(R(!0)),g.a.put("user/devices/",{devices:r},{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){t(q(e.data)),t(R(!1))})).catch((function(){t(W()),t(R(!1))}))}}},Ye=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.connectToDevice,a=e.removeDevice,n=e.device,r=e.showDrawer,o=e.server,i=e.batteryService,l=e.byteTransfered,s=this.props.devices&&this.props.devices.map((function(e){return n&&n.id===e.uid?c.a.createElement(Ve.a,{span:8,key:e.uid},c.a.createElement(Fe.a,{title:c.a.createElement(c.a.Fragment,null,n&&n.id===e.uid&&c.a.createElement(Pe.a,{twoToneColor:"#52c41a"}),c.a.createElement(Ne.a,{type:"vertical"}),c.a.createElement("span",null,e.name)),extra:c.a.createElement("div",null,c.a.createElement(E.a,{style:{color:"red"},shape:"circle",icon:c.a.createElement(xe.a,null),onClick:function(){return a(e.uid)}})),style:{width:300}},c.a.createElement("p",null,c.a.createElement("strong",null,"UID:")," ",e.uid),i&&Number.isInteger(i.level)&&c.a.createElement("p",null,c.a.createElement("strong",null,"Battery level: "),i.level),o&&c.a.createElement(E.a,{onClick:r},"Add recipe to device"),l?c.a.createElement(Be.a,{type:"circle",percent:Math.floor(100*l/9012),width:40}):"")):c.a.createElement(Ve.a,{span:8,key:e.uid},c.a.createElement(Fe.a,{title:c.a.createElement(c.a.Fragment,null,n&&n.id===e.uid&&c.a.createElement(Pe.a,{twoToneColor:"#52c41a"}),c.a.createElement(Ne.a,{type:"vertical"}),c.a.createElement("span",null,e.name)),extra:c.a.createElement("div",null,c.a.createElement(E.a,{style:{color:"red"},shape:"circle",icon:c.a.createElement(xe.a,{twoToneColor:"#52c41a"}),onClick:function(){return a(e.uid)}})),style:{width:300}},c.a.createElement("p",null,c.a.createElement("strong",null,"UID:")," ",e.uid),c.a.createElement(E.a,{shape:"circle",icon:c.a.createElement(Ge.a,null),onClick:function(){return t([{name:e.name}])}})))}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(Le.a,{gutter:16},s||""),c.a.createElement(Ne.a,null),c.a.createElement(He.a,{title:"Add device"},c.a.createElement(E.a,{shape:"circle",icon:c.a.createElement(Ge.a,null),onClick:function(){return t()}})),c.a.createElement(qe,null))}}]),a}(n.Component),ze=Object(i.b)((function(e){var t=e.auth.token,a=e.data,n=e.data.byteTransfered,c=e.bluetooth;return{token:t,data:a,device:c.device,server:c.server,batteryService:c.batteryService,byteTransfered:n}}),We)(Ye),Ke={writeRecipeToDevice:ve,getBinaryRecipe:function(e){return function(t,a){var n=a().auth.cookie.access_token;console.log("services",y),t(ie()),t(R(!0)),g.a.get("recipe_binary/"+e+"/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(e){t(le(e.data)),t(R(!1))})).catch((function(){t(se()),t(R(!1))}))}}},Je=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onClose,n=t.getBinaryRecipe,r=this.props.recipes.map((function(t){return c.a.createElement(Fe.a,{key:t.id,title:t.name+" - id"+t.id,style:{width:250},cover:c.a.createElement("img",{alt:"example",src:t.image}),className:"recipe__card"},c.a.createElement("p",null,t.description_text),e.props.buttonVisible&&c.a.createElement(E.a,{onClick:function(){a(),n(t.id)}},"Add"))}));return c.a.createElement(Le.a,{gutter:16},r)}}]),a}(n.Component),Xe=Object(i.b)((function(e){return{token:e.auth.token}}),Ke)(Je),Ze={convertToken:U,recipe:N,user:H,userDevices:function(){return function(e,t){e(A()),e(R(!0));var a=t().auth.cookie.access_token;g.a.get("user/devices/",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(t){e(P(t.data)),e(R(!1))})).catch((function(){e(x()),e(R(!1))}))}}},$e=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=t.call.apply(t,[this].concat(c))).state={current:"devices",showDrawer:!1},e.showDrawer=function(){e.setState({showDrawer:!0})},e.onClose=function(){e.setState({showDrawer:!1})},e.handleClick=function(t){e.setState({current:t.key})},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.recipe,a=e.user,n=e.userDevices;t(),a(),n()}},{key:"render",value:function(){var e=this.state.current,t=this.props.data,a=t.user,n=t.recipe,r=t.userDevices;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"elements__account"},c.a.createElement(we.a,{title:c.a.createElement("div",null,a&&a.first_name+" "+a.last_name)},c.a.createElement(De.a,{onClick:this.handleClick,selectedKeys:[e],mode:"horizontal"},c.a.createElement(De.a.Item,{key:"devices",icon:c.a.createElement(Ue.a,null)},"My devices"),c.a.createElement(De.a.Item,{key:"recipes",icon:c.a.createElement(Ae.a,null)},"Recipes"))),"devices"===this.state.current?c.a.createElement(ze,{devices:r&&r.devices,showDrawer:this.showDrawer}):c.a.createElement(Xe,{recipes:n,buttonVisible:!0,onClose:this.onClose}),c.a.createElement(Ie.a,{title:"Recipes",width:640,placement:"right",closable:!1,onClose:this.onClose,visible:this.state.showDrawer},c.a.createElement(Xe,{recipes:n,buttonVisible:!0,onClose:this.onClose}))))}}]),a}(n.Component),et=Object(i.b)((function(e){return{token:e.auth.token,data:e.data}}),Ze)($e),tt={fetchTokenSuccess:D},at=function(e){Object(u.a)(a,e);var t=Object(f.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentWillMount",value:function(){var e,t=this.props.fetchTokenSuccess,a=(e="auth_cookie",(new S.a).get(e));a&&(console.log("cookie",a),t(a))}},{key:"render",value:function(){var e=this.props,t=e.cookie,a=e.showPreloader;return c.a.createElement(c.a.Fragment,null,a&&c.a.createElement(Ee,null),c.a.createElement(d.c,{basepath:"elements2"},t.access_token&&c.a.createElement(d.b,{from:"/",to:"account",noThrow:!0}),c.a.createElement(Re,{path:"/"}),c.a.createElement(et,{path:"account"}),c.a.createElement(v.a,{default:!0,status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:c.a.createElement(E.a,{type:"primary"},c.a.createElement(d.a,{to:"/"},"Back Home"))})))}}]),a}(n.Component),nt=Object(i.b)((function(e){return{cookie:e.auth.cookie,showPreloader:e.settings.showPreloader}}),tt)(at),ct=a(11),rt=a(26),ot=a(227),it={auth:Object(ot.a)(Object(rt.a)({},D,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{cookie:a})})),{cookie:{}}),data:Object(ot.a)((T={},Object(rt.a)(T,V,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{recipe:a})})),Object(rt.a)(T,B,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{user:a})})),Object(rt.a)(T,P,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{userDevices:a})})),Object(rt.a)(T,le,(function(e,t){var a=t.payload,n=function(e){for(var t=window.atob(e),a=t.length,n=new Uint8Array(a),c=0;c<a;c++)n[c]=t.charCodeAt(c);return n.buffer}(a.binary_recipe);return Object(ct.a)(Object(ct.a)({},e),{},{recipeBinary:Object(ct.a)(Object(ct.a)({},a),{},{buffer:n})})})),Object(rt.a)(T,ue,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{byteTransfered:e.byteTransfered+a})})),Object(rt.a)(T,Q,(function(e,t){var a=t.payload;return console.log("saveDeviceSuccess",a),Object(ct.a)(Object(ct.a)({},e),{},{userDevices:a})})),Object(rt.a)(T,q,(function(e,t){var a=t.payload;return console.log("removeDeviceSuccess",a),Object(ct.a)(Object(ct.a)({},e),{},{userDevices:a})})),T),{recipe:[],user:null,userDevices:null,recipeBinary:null,byteTransfered:0}),bluetooth:Object(ot.a)((k={},Object(rt.a)(k,z,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{device:a})})),Object(rt.a)(k,X,(function(e,t){var a=t.payload;return Object(ct.a)(Object(ct.a)({},e),{},{server:a})})),Object(rt.a)(k,te,(function(e,t){var a=t.payload,n=e.batteryService;return Object(ct.a)(Object(ct.a)({},e),{},{batteryService:Object(ct.a)(Object(ct.a)({},n),a)})})),Object(rt.a)(k,oe,(function(e,t){var a=t.payload,n=e.deviceInfoService;return Object(ct.a)(Object(ct.a)({},e),{},{deviceInfoService:Object(ct.a)(Object(ct.a)({},n),a)})})),k),{device:null,server:null,batteryService:null,deviceInfoService:null}),settings:Object(ot.a)(Object(rt.a)({},R,(function(e,t){var a=t.payload,n=e.preloaderStack.slice();return a?n.push(0):n.shift(),Object(ct.a)(Object(ct.a)({},e),{},{showPreloader:!!n.length,preloaderStack:n})})),{showPreloader:!1,preloaderStack:[]})},lt=a(104),st=Object(lt.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0}),ut=Object(lt.a)({reducer:Object(ct.a)({},it),middleware:st,devTools:!1});o.a.render(c.a.createElement(i.a,{store:ut},c.a.createElement(nt,null)),document.getElementById("root"))}},[[145,1,2]]]);
//# sourceMappingURL=main.0c4bcbf8.chunk.js.map