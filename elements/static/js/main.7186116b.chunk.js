(this["webpackJsonpelements-frontend"]=this["webpackJsonpelements-frontend"]||[]).push([[0],{112:function(e,t,n){e.exports=n.p+"static/media/elements.b15f934a.svg"},127:function(e,t,n){e.exports=n(195)},136:function(e,t,n){},157:function(e,t,n){},195:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(13),r=n.n(o),i=n(48),l=(n(136),n(37)),s=n(38),u=n(40),h=n(39),p=n(125),v=n(202),f=n(63),d=n.n(f),g=n(92),E=function(e){return(new g.a).get(e)};d.a.defaults.baseURL="http://45.33.35.232/api";var b,m=Object(v.a)("FETCH_TOKEN_REQUEST"),O=Object(v.a)("FETCH_TOKEN_SUCCESS"),j=Object(v.a)("FETCH_TOKEN_FAILURE"),k=function(e){return function(t,n){console.log(t,n,e),t(m()),d.a.post("oauth/convert-token/",{grant_type:"convert_token",client_id:"qxN1hlSy0GbXqE6au6Hd63N4YOWK6WCP2TuXWzaO",backend:"google-oauth2",token:e}).then((function(e){console.log("success",e),function(e,t,n){var c=new g.a,a=new Date;a.setSeconds(a.getSeconds()+n),c.set(t,JSON.stringify(e),{path:"/",expires:a})}(e.data,"auth_cookie",e.data.expires_in),console.log("ReadStateFromCookie",E("auth_cookie")),t(O(e.data))})).catch((function(){t(j())}))}},y=Object(v.a)("FETCH_RECIPES_REQUEST"),C=Object(v.a)("FETCH_RECIPES_SUCCESS"),_=Object(v.a)("FETCH_RECIPES_FAILURE"),S=(Object(v.a)("FETCH_USER_REQUEST"),Object(v.a)("FETCH_USER_SUCCESS")),T=Object(v.a)("FETCH_USER_FAILURE"),R=(Object(v.a)("FETCH_USER_DEVICES_REQUEST"),Object(v.a)("FETCH_USER_DEVICES_SUCCESS")),U=Object(v.a)("FETCH_USER_DEVICES_FAILURE"),F=(n(156),n(157),n(111)),D=n.n(F),A={convertToken:k},B=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).responseGoogleRequest=function(e){console.log(e,"request")},e.responseGoogleSuccess=function(t){var n=e.props.convertToken;console.log(t,"success"),n(t.accessToken)},e.responseGoogleFailure=function(e){console.log(e,"failure")},e}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement(D.a,{clientId:"205221816405-0lvlolma2t1lvif67t749qee7h9te473.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogleSuccess,onFailure:this.responseGoogleFailure,onRequest:this.responseGoogleRequest,cookiePolicy:"single_host_origin"})}}]),n}(c.Component),I=Object(i.b)((function(e){return{token:e.auth.token}}),A)(B),H=n(112),L=n.n(H),w={convertToken:k},N=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return a.a.createElement("div",{className:"App",path:"/"},a.a.createElement("header",{className:"App-header"},a.a.createElement("img",{src:L.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null,"App for test BLE ",a.a.createElement("u",null,"Web connect")),a.a.createElement(I,null)))}}]),n}(c.Component),x=Object(i.b)((function(e){return{token:e.auth.token}}),w)(N),q=n(45),G=n(199),P=n(64),z=n(198),K=n(90),V=n(203),Q=n(204),W=null,J=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).connectToDevice=function(){navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["battery_service"]}).then((function(t){return console.log("device",t),(W=t).addEventListener("gattserverdisconnected",e.onDisconnected),W.gatt.connect()})).then((function(e){return console.log("server",e),e.getPrimaryService("battery_service")})).then((function(e){return console.log("service",e),e.getCharacteristic("battery_level")})).then((function(t){return console.log("characteristic",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleBatteryLevelChanged),t.readValue()})).then((function(e){console.log("value",e),console.log("Battery percentage is "+e.getUint8(0))})).catch((function(e){console.log("error",e)}))},e.disconnect=function(){W.gatt.disconnect()},e.onReconnectButtonClick=function(){W&&(W.gatt.connected?console.log("> Bluetooth Device is already connected"):e.connect().then((function(e){return console.log("server",e),e.getPrimaryService("battery_service")})).then((function(e){return console.log("service",e),e.getCharacteristic("battery_level")})).then((function(t){return console.log("characteristic",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleBatteryLevelChanged),t.readValue()})).then((function(e){console.log("value",e),console.log("Battery percentage is "+e.getUint8(0))})).catch((function(e){console.log("error",e)})))},e}return Object(s.a)(n,[{key:"handleBatteryLevelChanged",value:function(e){var t=e.target.value.getUint8(0);console.log("Event - Battery percentage is "+t)}},{key:"onDisconnected",value:function(){console.log("> Bluetooth Device disconnected")}},{key:"connect",value:function(){return console.log("Connecting to Bluetooth Device..."),W.gatt.connect()}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("button",{onClick:this.connectToDevice},"Add device"))}}]),n}(c.Component),M={convertToken:k,recipe:function(){return function(e,t){e(y()),d.a.get("recipe/").then((function(t){console.log("success",t),e(C(t.data))})).catch((function(){e(_())}))}},user:function(){return function(e,t){e(y());var n=t().auth.cookie.access_token;console.log("getState",n),d.a.get("user/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){console.log("success",t),e(S(t.data))})).catch((function(){e(T())}))}},userDevices:function(){return function(e,t){e(y());var n=t().auth.cookie.access_token;d.a.get("user/devices/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){console.log("success",t),e(R(t.data))})).catch((function(){e(U())}))}}},X=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.recipes&&this.props.recipes.map((function(e){return a.a.createElement(q.a,{span:8},a.a.createElement(G.a,{title:e.name,style:{width:300},cover:a.a.createElement("img",{alt:"example",src:e.image})},a.a.createElement("p",null,e.description_text)))}));return console.log("fsadasd",e),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",null,e||"devices not found"),a.a.createElement(J,null))}}]),n}(c.Component),Y=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.recipes.map((function(e){return a.a.createElement(q.a,{span:8},a.a.createElement(G.a,{title:e.name,style:{width:300},cover:a.a.createElement("img",{alt:"example",src:e.image})},a.a.createElement("p",null,e.description_text)))}));return console.log("fsadasd",e),a.a.createElement(P.a,{gutter:16},e)}}]),n}(c.Component),Z=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),o=0;o<c;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={current:"devices"},e.handleClick=function(t){console.log("click ",t),e.setState({current:t.key})},e}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.recipe,n=e.user,c=e.userDevices;t(),n(),c()}},{key:"render",value:function(){var e=this.state.current,t=this.props.data,n=t.user,c=t.recipe,o=t.userDevices;return console.log("account",n),a.a.createElement(a.a.Fragment,null,a.a.createElement(z.a,{title:a.a.createElement("div",null,n&&n.first_name+" "+n.last_name)},a.a.createElement(K.a,{onClick:this.handleClick,selectedKeys:[e],mode:"horizontal"},a.a.createElement(K.a.Item,{key:"devices",icon:a.a.createElement(V.a,null)},"\u041c\u043e\u0438 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430"),a.a.createElement(K.a.Item,{key:"recipes",icon:a.a.createElement(Q.a,null)},"\u0420\u0435\u0446\u0435\u043f\u0442\u044b"))),"devices"===this.state.current?a.a.createElement(X,{devices:o}):a.a.createElement(Y,{recipes:c}))}}]),n}(c.Component),$=Object(i.b)((function(e){return{token:e.auth.token,data:e.data}}),M)(Z),ee={fetchTokenSuccess:O},te=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.fetchTokenSuccess,t=E("auth_cookie");t&&e(t)}},{key:"render",value:function(){var e=this.props.cookie;return a.a.createElement(p.a,null,e.access_token?a.a.createElement($,{path:"/"}):a.a.createElement(x,{path:"/"}))}}]),n}(c.Component),ne=Object(i.b)((function(e){return{cookie:e.auth.cookie}}),ee)(te),ce=n(42),ae=n(50),oe=n(200),re={auth:Object(oe.a)(Object(ae.a)({},O,(function(e,t){var n=t.payload;return console.log("fetchTokenSuccess",n),Object(ce.a)(Object(ce.a)({},e),{},{cookie:n})})),{cookie:{}}),data:Object(oe.a)((b={},Object(ae.a)(b,C,(function(e,t){var n=t.payload;return console.log("fetchRecipesSuccess",n),Object(ce.a)(Object(ce.a)({},e),{},{recipe:n})})),Object(ae.a)(b,S,(function(e,t){var n=t.payload;return console.log("fetchUserSuccess",n),Object(ce.a)(Object(ce.a)({},e),{},{user:n})})),Object(ae.a)(b,R,(function(e,t){var n=t.payload;return console.log("fetchUserDevicesSuccess",n),Object(ce.a)(Object(ce.a)({},e),{},{userDevices:n})})),b),{recipe:[],user:null,userDevices:null})},ie=n(91),le=Object(ie.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0}),se=Object(ie.a)({reducer:Object(ce.a)({},re),middleware:le,devTools:!1});r.a.render(a.a.createElement(i.a,{store:se},a.a.createElement(ne,null)),document.getElementById("root"))}},[[127,1,2]]]);
//# sourceMappingURL=main.7186116b.chunk.js.map