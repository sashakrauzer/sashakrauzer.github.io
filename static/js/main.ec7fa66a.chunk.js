/*! For license information please see main.ec7fa66a.chunk.js.LICENSE.txt */
(this["webpackJsonpelements-frontend"]=this["webpackJsonpelements-frontend"]||[]).push([[0],{135:function(e,t,n){e.exports=n.p+"static/media/elements.b15f934a.svg"},155:function(e,t,n){e.exports=n(241)},164:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},241:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),i=n(38),s=(n(164),n(21)),u=n(28),l=n(30),f=n(29),d=n(61),b=n(249),v=n(55),h=n(95),g=n(250),p=n(47),E=n.n(p),O=n(132),m=n.n(O),j=n(98),C=function(e){for(var t=window.atob(e),n=t.length,a=new Uint8Array(n),r=0;r<n;r++)a[r]=t.charCodeAt(r);return a.buffer};E.a.defaults.baseURL="https://portal.pipe.today/api";var y=Object(g.a)("SHOW_APP_PRELOADER"),T=(Object(g.a)("SELECT_RECIPE"),Object(g.a)("FETCH_TOKEN_REQUEST")),S=Object(g.a)("FETCH_TOKEN_SUCCESS"),_=(Object(g.a)("FETCH_TOKEN_FAILURE"),function(){return function(e){e(T());var t={access_token:"vw1gWk6snMInNV1CIFENDCOiqn3RGe",expires_in:2592e3,token_type:"Bearer",scope:"read write",refresh_token:"J0QXCv3XLzs22fbJNell77WzxjoaPV"};!function(e,t,n){var a=new j.a,r=new Date;r.setSeconds(r.getSeconds()+n),a.set(t,JSON.stringify(e),{path:"/",expires:r})}(t,"auth_cookie",t.expires_in),e(S(t))}}),R=Object(g.a)("LOGOUT_REQUEST"),I=Object(g.a)("LOGOUT_SUCCESS"),w=Object(g.a)("LOGOUT_FAILURE"),D=Object(g.a)("FETCH_RECIPES_REQUEST"),k=Object(g.a)("FETCH_RECIPES_SUCCESS"),A=Object(g.a)("FETCH_RECIPES_FAILURE"),U=function(){return function(e,t){e(D()),e(y(!0));var n=t().auth.cookie.access_token;E.a.get("recipe/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e(k(t.data)),e(y(!1))})).catch((function(){e(A()),e(y(!1))}))}},L=(Object(g.a)("FETCH_USER_REQUEST"),Object(g.a)("FETCH_USER_SUCCESS")),F=Object(g.a)("FETCH_USER_FAILURE"),V=function(){return function(e,t){e(D()),e(y(!0));var n=t().auth.cookie.access_token;E.a.get("user/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e(L(t.data)),e(y(!1))})).catch((function(t){switch(e(F()),e(y(!1)),t.response.status){case 403:Object(d.d)("/")}}))}},N=(Object(g.a)("FETCH_USER_DEVICES_REQUEST"),Object(g.a)("FETCH_USER_DEVICES_SUCCESS")),B=Object(g.a)("FETCH_USER_DEVICES_FAILURE"),P=Object(g.a)("SAVE_DEVICE_REQUEST"),x=Object(g.a)("SAVE_DEVICE_SUCCESS"),G=Object(g.a)("SAVE_DEVICE_FAILURE"),H=(Object(g.a)("REMOVE_DEVICE_REQUEST"),Object(g.a)("REMOVE_DEVICE_SUCCESS")),z=Object(g.a)("REMOVE_DEVICE_FAILURE"),q=Object(g.a)("GET_BINARY_RECIPE_REQUEST"),M=Object(g.a)("GET_BINARY_RECIPE_SUCCESS"),Q=Object(g.a)("GET_BINARY_RECIPE_FAILURE"),W=Object(g.a)("POST_LOGS_REQUEST"),Y=Object(g.a)("POST_LOGS_SUCCESS"),J=Object(g.a)("POST_LOGS_FAILURE"),K=(n(185),n(186),function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader__container"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"lds-ripple"},r.a.createElement("div",null),r.a.createElement("div",null))))}}]),n}(a.Component)),X=n(133),Z=n.n(X),$={convertToken:_},ee=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).responseGoogleRequest=function(){},e.responseGoogleSuccess=function(t){(0,e.props.convertToken)(t.accessToken,"google-oauth2","h19R0p6UGmYKzuc4fg1uaPlHwXPOc8GktswMZEdu")},e.responseGoogleFailure=function(){},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(Z.a,{clientId:"205221816405-0lvlolma2t1lvif67t749qee7h9te473.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogleSuccess,onFailure:this.responseGoogleFailure,onRequest:this.responseGoogleRequest,cookiePolicy:"single_host_origin",className:"google-oauth-btn"})}}]),n}(a.Component),te=Object(i.b)((function(e){return{token:e.auth.token}}),$)(ee),ne=n(134),ae=n.n(ne),re={convertToken:_},ce=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={response:null,failure:null},e.responseFacebook=function(t){var n=e.props.convertToken;e.setState({response:t}),n(t.accessToken,"facebook","h19R0p6UGmYKzuc4fg1uaPlHwXPOc8GktswMZEdu")},e.onFailure=function(t){e.setState({failure:t})},e.onResponseFacebook=function(e){console.log("response Facebook",e)},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.convertToken)()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ae.a,{appId:"369580627566109",autoLoad:!1,fields:"name,email,picture",callback:this.responseFacebook,onFailure:this.onFailure,textButton:"Login",redirectUri:"https://portal.pipe.today/"}))}}]),n}(a.Component),oe=Object(i.b)((function(e){return{token:e.auth.token}}),re)(ce),ie=n(135),se=n.n(ie),ue=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){this.props.isLogged;return r.a.createElement("div",{className:"App",path:"/"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:se.a,className:"App-logo",alt:"logo"}),r.a.createElement("div",{className:"login-btn-wrap"},navigator.userAgent.includes("cider")?null:r.a.createElement(te,null),r.a.createElement(oe,null))))}}]),n}(a.Component),le=n(244),fe=n(111),de=n(248),be=n(255),ve=n(256),he=(n(187),n(80)),ge=n(242),pe=n(93),Ee=n(254),Oe=n(60),me=n.n(Oe),je=n(83),Ce=n(136),ye=n(8),Te=n(247),Se="5cf052d0-2403-4719-a558-b7e72c48112f",_e={dataReceive:{name:"Data Receive",uuid:"5cf052d1-2403-4719-a558-b7e72c48112f",description:"Receive data channel",properties:["write"]},dataTransmit:{name:"Data Transmit",uuid:"5cf052d2-2403-4719-a558-b7e72c48112f",description:"Transmit data channel",properties:["read","notify"]},controlReceive:{name:"Control Receive",uuid:"5cf052d3-2403-4719-a558-b7e72c48112f",description:"Control data receive channel",properties:["write"]},controlTransmit:{name:"Control Transmit",uuid:"5cf052d4-2403-4719-a558-b7e72c48112f",description:"Control data transmit channel",properties:["read","notify"]},status:{name:"Status",uuid:"5cf052d5-2403-4719-a558-b7e72c48112f",description:"Expose status of transfer data",properties:["write","read","notify"]}},Re="32dd23d0-d223-4462-34ad-434ec288113c",Ie={recipeListLowPart:{name:"Recipe List Low Part",uuid:"32dd23d1-d223-4462-34ad-434ec288113c",description:"Exporse first 3 slots of recipe list",properties:["read","notify"]},recipeListMidPart:{name:"Recipe List Mid Part",uuid:"32dd23d2-d223-4462-34ad-434ec288113c",description:"Exporse mid 3 slots of recipe list",properties:["read","notify"]},recipeListHighPart:{name:"Recipe List High Part",uuid:"32dd23d3-d223-4462-34ad-434ec288113c",description:"Exporse last 3 slots of recipe list",properties:["read","notify"]},recipeListSize:{name:"Recipe List Size",uuid:"32dd23d4-d223-4462-34ad-434ec288113c",description:"Exporse size of recipe list",properties:["read","notify"]}},we="dad54500-2ee3-6213-624a-aeca328f132a",De={command:{name:"Command",uuid:"dad54501-2ee3-6213-624a-aeca328f132a",description:"",properties:["write"]},commandStatus:{name:"Command Status",uuid:"dad54502-2ee3-6213-624a-aeca328f132a",description:"",properties:["notify"]}},ke=new function e(){Object(s.a)(this,e),this.prepareControlReceiveBuffer=function(e,t){if("writeRecipeRequest"===e&&t.length){var n=new ArrayBuffer(20),a=t.length;return new DataView(n).setInt8(0,10,!0),new DataView(n).setInt8(1,255,!0),new DataView(n).setInt32(2,a,!0),new DataView(n).setInt16(6,6,!0),n}if("writeImgRequest"===e&&t.length){var r=new ArrayBuffer(20),c=t.length;return new DataView(r).setInt8(0,10,!0),new DataView(r).setInt8(1,255,!0),new DataView(r).setInt32(2,c,!0),new DataView(r).setInt16(6,2,!0),r}if("fetchLogs"===e){var o=new ArrayBuffer(20);return new DataView(o).setInt8(0,14,!0),new DataView(o).setInt8(1,0,!0),new DataView(o).setInt32(2,0,!0),new DataView(o).setInt16(6,7,!0),o}if("fetchLogsReady"===e){var i=new ArrayBuffer(20);return new DataView(i).setInt8(0,10,!0),new DataView(i).setInt8(1,0,!0),new DataView(i).setInt32(2,0,!0),new DataView(i).setInt16(6,7,!0),i}},this.prepareCommandBuffer=function(e,t){if("removeRecipe"===e&&t.id){var n=new ArrayBuffer(20),a=Number(t.id);return new DataView(n).setInt8(0,18,!0),new DataView(n).setInt32(1,a,!0),n}}};E.a.defaults.baseURL="https://portal.pipe.today/api";var Ae=Object(g.a)("CONNECT_TO_DEVICE_REQUEST"),Ue=Object(g.a)("CONNECT_TO_DEVICE_SUCCESS"),Le=Object(g.a)("CONNECT_TO_DEVICE_FAILURE"),Fe=function(e){return function(t,n){var a=n().bluetooth.device;t(Ae());var r=e;navigator.bluetooth.requestDevice({acceptAllDevices:!r||void 0,filters:r,optionalServices:[Se,Re,we,"battery_service",10793,6154]}).then((function(e){if(a&&a.name===e.name)throw new Error("device has already been added");console.log("%cconnected device:","color:green; font-size:2em; border-top:10px solid red"),console.log(e),e.ongattserverdisconnected=function(e){return t(Ne(e))},t(Ue(e)),t(function(e){return function(t,n){var a=n(),r=a.auth.cookie.access_token,c=a.data.userDevices.devices,o=m.a.uniqBy([].concat(Object(h.a)(c),[{name:e.name,uid:e.name}]),"name");if(o.length===c.length)return!1;t(P()),t(y(!0)),E.a.put("user/devices/",{devices:o},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){t(x(e.data)),t(y(!1))})).catch((function(){t(G()),t(y(!1))}))}}(e)),t(Me(e))})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{message:"connectToDeviceFailure"};console.log(e.message),t(Le())}))}},Ve=Object(g.a)("DEVICE_DISCONNECTED"),Ne=(Object(g.a)("FAILED_TO_RECONNECT"),Object(g.a)("DEVICE_CONNECTING"),Object(g.a)("DEVICE_RECONNECTED"),function(e){return function(t){t(Ve());var n=e.target;console.log("Device ".concat(n.name," is disconnected.")),t(Me(n))}}),Be=Object(g.a)("FETCH_RECIPES_ON_DEVICE"),Pe=Object(g.a)("CONNECT_GATT_REQUEST"),xe=Object(g.a)("CONNECT_GATT_SUCCESS"),Ge=Object(g.a)("CONNECT_GATT_FAILURE"),He=Object(g.a)("CONNECT_DATA_TRANSFER_SERVICE_SUCCESS"),ze=Object(g.a)("CONNECT_RECIPE_INFO_SERVICE_SUCCESS"),qe=Object(g.a)("CONNECT_COMMAND_SERVICE_SUCCESS"),Me=function(e){return function(t,n){function a(e){console.log("["+(new Date).toJSON().substr(11,8)+"] "+e)}!function e(t,n,r,c,o){r().then((function(e){return c(e)})).catch((function(i){if(console.log("catch",i),0===t)return o();a("Retrying in "+n+"s... ("+t+" tries left)"),setTimeout((function(){e(--t,2*n,r,c,o)}),1e3*n)}))}(3,2,(function(){return t(Pe({device:e})),a("Connecting to Bluetooth Device... "),e.gatt.connect()}),(function(a){console.log("%cGATT server:","color:green; font-size:2em; border-top:10px solid red"),console.log(a),t(xe({server:a,device:e})),a.getPrimaryService(Se).then((function(e){return t(He(e)),e.getCharacteristic(_e.controlTransmit.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return function(e,t,n){var a=n(),r=a.bluetooth.server,c=a.data.recipeBinary,o=e.target.value.getUint8(0),i=e.target.value.getUint8(1),s=e.target.value.getUint32(2,!0),u=e.target.value.getUint16(6,!0);if(console.log("handleControlTransmit",o,"----",i,"----",s,"----",u,"----",e.target.value.buffer),10===o&&6===u&&255===i)console.log("prepare to sending recipe..."),r.getPrimaryService(Se).then((function(e){return e.getCharacteristic(_e.dataReceive.uuid)})).then((function(e){vt=e,t(ot({characteristicForWrite:e})),setTimeout((function(){return gt(c,t)}),2e3)})).catch((function(e){console.log("ERROR - prepare to sending recipe: "+e)}));else if(10===o&&2===u&&255===i)console.log("prepare to sending img..."),setTimeout((function(){return r.getPrimaryService(Se).then((function(e){return e.getCharacteristic(_e.dataReceive.uuid)})).then((function(e){vt=e,t(st()),Et(c,t)})).catch((function(e){console.log("ERROR - prepare to sending img: "+e)}))}),2e3);else if(15===o&&6===u)console.log("Recipe did saved"),t(it()),setTimeout((function(){r.getPrimaryService(Se).then((function(e){return e.getCharacteristic(_e.controlReceive.uuid)})).then((function(e){var t=ke.prepareControlReceiveBuffer("writeImgRequest",{length:c.bufferImg.byteLength});console.log("%ccontrol receive:","color:green; font-size:2em; border-top:10px solid red"),console.log(new Int8Array(t),c.bufferImg.byteLength),e.writeValue(new Int8Array(t))})).catch((function(e){alert(e)}))}),2e3);else if(15===o&&2===u)console.log("Img did saved"),t(ut()),t(y(!1));else if(13===o)console.warn("Don't have space");else if(10===o&&7===u&&s){var l=new ArrayBuffer(s);t(Qe({logs:l})),r.getPrimaryService(Se).then((function(e){return e.getCharacteristic(_e.controlReceive.uuid)})).then((function(e){var t=ke.prepareControlReceiveBuffer("fetchLogsReady");console.log("%ccontrol receive:","color:green; font-size:2em; border-top:10px solid red"),console.log(new Int8Array(t)),e.writeValue(new Int8Array(t))})).catch((function(e){console.log("ERROR - WV Control Receive I am ready to get logs: "+e)}))}switch(console.log("%ccontrol transmit:","color:green; font-size:2em; border-top:10px solid red"),o){case 10:console.log("%cI am ready","color:black; font-size:1em; border: 1px dashed gray;"),bt=0;break;case 11:console.log("%cPaused","color:black; font-size:1em; border: 1px dashed gray;");break;case 12:console.log("%cAborted","color:black; font-size:1em; border: 1px dashed gray;");break;case 13:console.log("%cDont`t have space","color:black; font-size:1em; border: 1px dashed gray;");break;case 14:console.log("%cBusy","color:black; font-size:1em; border: 1px dashed gray;");break;case 15:console.log("%cSuccess","color:black; font-size:1em; border: 1px dashed gray;");break;default:console.log("%cUndefined status: "+o,"color:black; font-size:1em; border: 1px dashed gray;")}}(e,t,n)})),n().bluetooth.dataTransferService.getCharacteristic(_e.status.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return function(e,t,n){var a=n().data,r=a.recipeBinary,c=a.recipeAndImgAreTransfering,o=c.recipeIsTransfering,i=c.imgIsTransfering;if(o){var s=e.target.value;console.log("handleStatusTransferData",s.buffer,s.getUint32(0),s.getUint8(4)),gt(r,t)}else if(i){var u=e.target.value;console.log("handleStatusTransferDataImg",u.buffer,u.getUint32(0)),Et(r,t)}else{var l=e.target.value;console.log("handleStatusTransferData",l,l.getUint8(0))}}(e,t,n)})),n().bluetooth.dataTransferService.getCharacteristic(_e.dataTransmit.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){e.addEventListener("characteristicvaluechanged",(function(e){return function(e,t,n){var a=n(),r=a.data.logsTransfering,c=r.logs,o=r.keyI,i=a.bluetooth.device,s=e.target.value;console.log("handleTransmitData",s.buffer,s.getUint8(0),"logs byteLength: "+c.byteLength,"logs buffer: "+c);var u=0;for(;u<20&&!(o>=c.byteLength);)new DataView(c).setInt8(o,s.getUint8(u)),Object(Ce.a)("keyI"),o++,u++;if(o===c.byteLength){var l=btoa(String.fromCharCode.apply(String,Object(h.a)(new Uint8Array(c))));console.log("base64",l),t(Ke(l)),t(function(e,t){return function(n,a){var r=a().auth.cookie.access_token;n(W()),n(y(!0)),E.a.post("/history_usage/add_history/",{history_string:e,device_uid:t},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){n(Y(e.data)),n(y(!1))})).catch((function(){n(J()),n(y(!1))}))}}(l,i.name))}}(e,t,n)}))})).catch((function(e){console.log("DataTransferService",e)})),a.getPrimaryService(Re).then((function(e){return t(ze(e)),e.getCharacteristic(Ie.recipeListLowPart.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return mt(e,t,n)})),e.readValue()})).then((function(e){var a;return console.log("RV - recipeListLowPart: ",e.buffer),t(Be({recipesIDList:(a={},Object(ye.a)(a,e.getUint32(0,!0),e.getUint16(4,!0)),Object(ye.a)(a,e.getUint32(6,!0),e.getUint16(10,!0)),Object(ye.a)(a,e.getUint32(12,!0),e.getUint16(16,!0)),a),from:"lowPart"})),n().bluetooth.recipeInfoService.getCharacteristic(Ie.recipeListMidPart.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return mt(e,t,n)})),e.readValue()})).then((function(e){var a;return console.log("RV - recipeListMidPart: ",e.buffer),t(Be({recipesIDList:(a={},Object(ye.a)(a,e.getUint32(0,!0),e.getUint16(4,!0)),Object(ye.a)(a,e.getUint32(6,!0),e.getUint16(10,!0)),Object(ye.a)(a,e.getUint32(12,!0),e.getUint16(16,!0)),a),from:"midPart"})),n().bluetooth.recipeInfoService.getCharacteristic(Ie.recipeListHighPart.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return mt(e,t,n)})),e.readValue()})).then((function(e){var a;return console.log("RV - recipeListHighPart: ",e.buffer),t(Be({recipesIDList:(a={},Object(ye.a)(a,e.getUint32(0,!0),e.getUint16(4,!0)),Object(ye.a)(a,e.getUint32(6,!0),e.getUint16(10,!0)),Object(ye.a)(a,e.getUint32(12,!0),e.getUint16(16,!0)),a),from:"highPart"})),n().bluetooth.recipeInfoService.getCharacteristic(Ie.recipeListSize.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",(function(e){return function(e){console.log("handleSizeOfRecipeList",e.target.value.buffer)}(e)})),e.readValue()})).then((function(e){console.log("RV - handleSizeOfRecipeList: ",e.buffer)})).catch((function(e){console.log("RecipeInfoService",e)})),a.getPrimaryService(we).then((function(e){return t(qe(e)),e.getCharacteristic(De.command.uuid)})).then((function(e){return e.startNotifications()})).then((function(e){e.addEventListener("characteristicvaluechanged",(function(e){return function(e,t,n){var a=e.target.value.getUint8(0),r=e.target.value.getUint32(1,!0);console.log("handleCommand",e.target.value.buffer),1===a&&t(ht(r))}(e,t)}))})).catch((function(e){console.log("CommandService",e)}));try{t(tt())}catch(r){console.log("catch from success GATT",r.message)}}),(function(){t(Ge({device:e})),a("Failed to connect."),Te.a.error({title:"Failed to reconnect",content:"Please try again later"})}))}},Qe=Object(g.a)("START_RECEIVE_OF_LOGS"),We=Object(g.a)("RECEIVED_LOGS"),Ye=Object(g.a)("END_RECEIVE_OF_LOGS"),Je=Object(g.a)("FETCH_LOGS_REQUEST"),Ke=Object(g.a)("FETCH_LOGS_SUCCESS"),Xe=Object(g.a)("FETCH_LOGS_FAILURE"),Ze=Object(g.a)("FETCH_BATTERY_SERVICE_REQUEST"),$e=Object(g.a)("FETCH_BATTERY_SERVICE_SUCCESS"),et=Object(g.a)("FETCH_BATTERY_SERVICE_FAILURE"),tt=(Object(g.a)("FETCH_BATTERY_CHARACTERISTIC_SUCCESS"),function(){return function(e,t){e(Ze());var n=t().bluetooth.server,a=null;function r(t){e($e({level:t.target.value.getUint8(0)}))}n.getPrimaryService("battery_service").then((function(t){return a=t,e($e()),a.getCharacteristic("battery_level")})).catch((function(){e(et())})).then((function(e){return e.startNotifications()})).then((function(e){return e.addEventListener("characteristicvaluechanged",r),e.readValue()})).then((function(t){e($e({level:t.getUint8(0)}))})).catch((function(){}))}}),nt=Object(g.a)("FETCH_DEVICE_INFO_REQUEST"),at=Object(g.a)("FETCH_DEVICE_INFO_SUCCESS"),rt=Object(g.a)("FETCH_DEVICE_INFO_FAILURE"),ct=Object(g.a)("FETCH_DEVICE_INFO_CHARACTERISTIC_SUCCESS"),ot=(Object(g.a)("FETCH_RECIPE_INFO_REQUEST"),Object(g.a)("FETCH_RECIPE_INFO_SUCCESS"),Object(g.a)("FETCH_RECIPE_INFO_FAILURE"),Object(g.a)("WRITE_RECIPE_TO_DEVICE_REQUEST"),Object(g.a)("WRITE_RECIPE_TO_DEVICE_SUCCESS"),Object(g.a)("WRITE_RECIPE_TO_DEVICE_FAILURE"),Object(g.a)("START_TRANSFER_OF_RECIPE")),it=Object(g.a)("END_TRANSFER_OF_RECIPE"),st=Object(g.a)("START_TRANSFER_OF_IMG"),ut=Object(g.a)("END_TRANSFER_OF_IMG"),lt=Object(g.a)("RECIPE_BYTE_TRANSFERED"),ft=Object(g.a)("IMG_BYTE_TRANSFERED"),dt=Object(g.a)("SPEED_OF_DATA_TRANSFER"),bt=0,vt=null,ht=function(e){return function(t,n){var a=n(),r=a.bluetooth.server,c=a.auth.cookie.access_token;t(q()),t(y(!0)),E.a.get("recipe_binary/"+e+"/",{headers:{Authorization:"Bearer ".concat(c)}}).then((function(e){t(M(e.data)),t(y(!1)),r.getPrimaryService(Se).then((function(e){return e.getCharacteristic(_e.controlReceive.uuid)})).then((function(e){var t=n().data.recipeBinary,a=ke.prepareControlReceiveBuffer("writeRecipeRequest",{length:t.buffer.byteLength});console.log("%ccontrol receive:","color:green; font-size:2em; border-top:10px solid red"),console.log(new Int8Array(a)),setTimeout((function(){e.writeValue(new Int8Array(a))}),1e3)})).catch((function(e){console.log("Error writeValue to Control Receive: ",e)}))})).catch((function(e){console.log("ERROR - getBinaryRecipe",e),t(Q()),t(y(!1))}))}};function gt(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(je.a)(me.a.mark((function e(t,n){var a,r,c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("sendingData..."),a=Date.now()/1e3,r=0;case 3:if(!(bt<t.buffer.byteLength&&r<400)){e.next=18;break}return e.prev=4,console.log("recipeBinary await",t.buffer.slice(bt,bt+20)),e.next=8,vt.writeValue(t.buffer.slice(bt,bt+20));case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("catch",e.t0);case 13:n(lt(t.buffer.slice(bt,bt+20).byteLength)),console.log("DataBuffer",t.buffer.slice(bt,bt+20));case 15:bt+=20,r+=20,e.next=3;break;case 18:c=Date.now()/1e3,n(dt(400/(c-a)));case 20:case"end":return e.stop()}}),e,null,[[4,10]])})))).apply(this,arguments)}function Et(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=Object(je.a)(me.a.mark((function e(t,n){var a,r,c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("sendingData..."),a=Date.now()/1e3,r=0;case 3:if(!(bt<t.bufferImg.byteLength&&r<400)){e.next=11;break}return e.next=6,vt.writeValue(t.bufferImg.slice(bt,bt+20));case 6:n(ft(t.bufferImg.slice(bt,bt+20).byteLength)),console.log("DataBuffer",t.bufferImg.slice(bt,bt+20));case 8:bt+=20,r+=20,e.next=3;break;case 11:c=Date.now()/1e3,n(dt(400/(c-a)));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t,n){console.log("handleRecipeList",e.target.value.buffer)}var jt,Ct,yt,Tt={connectToDevice:Fe,batteryServiceAction:tt,deviceInfoServiceAction:function(){return function(e,t){e(nt()),t().bluetooth.server.getPrimaryService(6154).then((function(t){return e(at()),t.getCharacteristic(10793)})).catch((function(){e(rt())})).then((function(e){if(e)return e.readValue();throw new Error("characteristic manufacturerName not found")})).then((function(t){e(ct({manufacturerName:t.getUint8(0)}))})).catch((function(){}))}},writeRecipeToDevice:ht},St=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={bluetoothDevice:null,batteryLevelCharacteristic:null,gattServer:null,transferService:null,characteristic:null},e.connectToDevice=function(){navigator.bluetooth.requestDevice({filters:[{name:"BlueNRG"},{services:["5cf052d0-2403-4719-a558-b7e72c48112f"]}],optionalServices:["5cf052d0-2403-4719-a558-b7e72c48112f"]}).then((function(t){console.log("device",t),e.setState({bluetoothDevice:t}),e.state.bluetoothDevice.addEventListener("gattserverdisconnected",e.onDisconnected)})).catch((function(e){console.log("error",e)}))},e.serviceConnect=function(t){var n=e.props.server;console.log("serviceConnect",n),n.getPrimaryService(t).then((function(t){console.log("service",t),e.setState({transferService:t})})).catch((function(e){alert(e)}))},e.CtrlRxCharacteristicUuid=function(){var t=new ArrayBuffer(20);new DataView(t).setInt8(0,10),new DataView(t).setInt8(1,255),new DataView(t).setInt32(2,800),new DataView(t).setInt16(6,6),console.log("BUFFER",t,new DataView(t)),e.state.transferService.getCharacteristic("5cf052d3-2403-4719-a558-b7e72c48112f").then((function(e){return console.log("characteristic Control Receive"),e.writeValue(t)})).then((function(e){console.log("Control Receive value: ",e)})).catch((function(e){alert(e)}))},e.sendDataToDevice=function(){var t=new ArrayBuffer(20);new DataView(t).setInt32(0,6e3),e.state.transferService.getCharacteristic("5cf052d1-2403-4719-a558-b7e72c48112f").then((function(e){console.log("characteristic Data Receive",t);var n=null;function a(){return(a=Object(je.a)(me.a.mark((function a(){var r;return me.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:r=0;case 1:if(!(r<800)){a.next=9;break}return a.next=4,e.writeValue(t);case 4:n=a.sent,console.log("sendingData",n);case 6:r+=20,a.next=1;break;case 9:case"end":return a.stop()}}),a)})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()})).catch((function(e){alert(e)}))},e.CtrlTxCharacteristicUuid=function(){e.state.transferService.getCharacteristic("5cf052d4-2403-4719-a558-b7e72c48112f").then((function(e){return e.startNotifications()})).then((function(t){t.addEventListener("characteristicvaluechanged",e.handleResponseControlMsg),console.log("\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043d\u0430 Control Transmit")})).catch((function(e){alert(e)}))},e.StatusCharacteristicUuid=function(){e.state.transferService.getCharacteristic("5cf052d5-2403-4719-a558-b7e72c48112f").then((function(t){return console.log("characteristic \u0421\u0442\u0430\u0442\u0443\u0441",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleLevelChanged),t.readValue()})).then((function(e){console.log("\u0421\u0442\u0430\u0442\u0443\u0441 value: ",e)}))},e.batteryLevel=function(){e.state.transferService.getCharacteristic("battery_level").then((function(t){return console.log("characteristic \u0421\u0442\u0430\u0442\u0443\u0441",t),t.startNotifications(),t.addEventListener("characteristicvaluechanged",e.handleLevelChanged),t.readValue()})).then((function(e){console.log("\u0417\u0430\u0440\u044f\u0434 \u0431\u0430\u0442\u0430\u0440\u0435\u0438",e.buffer)}))},e}return Object(u.a)(n,[{key:"connect",value:function(){var e=this;return this.state.bluetoothDevice.gatt.connect().then((function(t){console.log("server",t),e.setState({gattServer:t})})).catch((function(e){alert(e)}))}},{key:"handleResponseControlMsg",value:function(e){var t=e.target.value.getUint8(0);console.log("handleResponseControlMsg",10===t)}},{key:"handleLevelChanged",value:function(e){var t=e.target.value;console.log("handleStatusChanged",t,t.buffer)}},{key:"componentDidUpdate",value:function(e){var t=this.props.bluetooth;t.device,t.server,t.batteryService}},{key:"render",value:function(){return r.a.createElement("div",null)}}]),n}(a.Component),_t=Object(i.b)((function(e){var t=e.auth.token,n=e.data.recipeBinary,a=e.data,r=e.bluetooth,c=e.bluetooth;return{token:t,device:c.device,bluetooth:r,server:c.server,recipeBinary:n,data:a}}),Tt)(St),Rt=n(51),It=n(243),wt=n(246),Dt=n(251),kt=n(252),At=n(253),Ut=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.device,n=e.connected,a=e.connectToDevice,c=e.removeDevice,o=e.batteryService,i=e.showDrawer,s=e.byteTransfered,u=e.imgByteTransfered,l=e.recipeBinary,f=e.server,d=e.GATTConnected,b=e.connectionRequest,h=e.speedOfDataTransfer,g="";g=d?"online":b?"connecting...":"offline";var p=null;switch(e.logs.status){case"success":p=r.a.createElement(Dt.a,{twoToneColor:"#52c41a"});break;case"request":p=r.a.createElement(kt.a,{twoToneColor:"#52c41a"});break;case"failure":p=r.a.createElement(At.a,{twoToneColor:"#52c41a"})}return n?r.a.createElement(Rt.a,null,r.a.createElement(It.a,{title:r.a.createElement(r.a.Fragment,null,d&&r.a.createElement(Dt.a,{twoToneColor:"#52c41a"}),b&&r.a.createElement(kt.a,{twoToneColor:"#52c41a"}),r.a.createElement(ge.a,{type:"vertical"}),r.a.createElement("span",null,t.name)),extra:r.a.createElement("div",null,r.a.createElement(v.a,{style:{color:"red"},shape:"circle",icon:r.a.createElement(At.a,null),onClick:function(){return c(t.uid)}})),style:{width:300}},r.a.createElement("p",null,r.a.createElement("strong",null,"Device: "),g),r.a.createElement("p",null,r.a.createElement("strong",null,"UID:")," ",t.uid),r.a.createElement("p",null,r.a.createElement("strong",null,"Logs:")," ",p),l&&r.a.createElement("p",null,r.a.createElement("strong",null,"Bytes transferred:")," ","".concat(s+u,"/").concat(l.buffer.byteLength+l.bufferImg.byteLength)),l&&r.a.createElement("p",null,r.a.createElement("strong",null,"Speed:")," ","kB/s: "+(h/1024).toFixed(2)),o&&Number.isInteger(o.level)?r.a.createElement("div",null,r.a.createElement("strong",null,"Battery level: "),r.a.createElement(wt.a,{percent:o.level,size:"small",status:"normal"})):null,r.a.createElement("br",null),f&&r.a.createElement(v.a,{onClick:i},"Recipe's list"))):r.a.createElement(Rt.a,null,r.a.createElement(It.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{type:"vertical"}),r.a.createElement("span",null,t.name)),extra:r.a.createElement("div",null,r.a.createElement(v.a,{style:{color:"red"},shape:"circle",icon:r.a.createElement(At.a,{twoToneColor:"#52c41a"}),onClick:function(){return c(t.uid)}})),style:{width:300}},r.a.createElement("p",null,r.a.createElement("strong",null,"Device: "),g),r.a.createElement("br",null),r.a.createElement(v.a,{type:"primary",onClick:function(){a([{name:t.name}])}},"Connect")))}}]),n}(a.Component),Lt={recipe:U,user:V,connectToDevice:Fe,removeDevice:function(e){return function(t,n){var a=n(),r=a.auth.cookie.access_token,c=a.data.userDevices.devices.filter((function(t){return t.uid!==e}));t(P()),t(y(!0)),E.a.put("user/devices/",{devices:c},{headers:{Authorization:"Bearer ".concat(r)}}).then((function(e){t(H(e.data)),t(y(!1))})).catch((function(){t(z()),t(y(!1))}))}},disconnectGattServer:function(e){return function(){e.device.gatt.disconnect()}}},Ft=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.connectToDevice,n=e.removeDevice,a=e.connectedDevice,c=e.showDrawer,o=e.server,i=e.batteryService,s=e.byteTransfered,u=e.imgByteTransfered,l=e.recipeBinary,f=e.disconnectGattServer,d=e.speedOfDataTransfer,b=e.logs,h=e.connectionRequest,g=this.props.devices&&this.props.devices.map((function(e){return r.a.createElement(Ut,{key:e.name,connected:e.name===a.name,GATTConnected:e.name===a.name&&o&&o.connected,device:e,connectToDevice:t,removeDevice:n,batteryService:i,showDrawer:c,byteTransfered:s,imgByteTransfered:u,recipeBinary:l,server:o,disconnectGattServer:f,connectionRequest:e.name===a.name&&h,speedOfDataTransfer:d,logs:b})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{gutter:16},g||""),r.a.createElement(ge.a,null),r.a.createElement(pe.a,{title:"Add device"},r.a.createElement(v.a,{type:"primary",icon:r.a.createElement(Ee.a,null),onClick:function(){t()}},"Add new device")),r.a.createElement(_t,null))}}]),n}(a.Component),Vt=Object(i.b)((function(e){var t=e.auth.token,n=e.data,a=e.data,r=a.byteTransfered,c=a.imgByteTransfered,o=a.recipeBinary,i=a.speedOfDataTransfer,s=a.logs,u=e.bluetooth,l=u.device,f=u.server,d=u.batteryService;return{token:t,data:n,connectedDevices:u.devices,connectedDevice:l,connectionRequest:u.connectionRequest,server:f,batteryService:d,byteTransfered:r,imgByteTransfered:c,recipeBinary:o,speedOfDataTransfer:i,logs:s}}),Lt)(Ft),Nt={writeRecipeToDevice:ht,getBinaryRecipe:function(e){return function(t,n){var a=n().auth.cookie.access_token;t(q()),t(y(!0)),E.a.get("recipe_binary/"+e+"/",{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){t(M(e.data)),t(y(!1))})).catch((function(){t(Q()),t(y(!1))}))}},updateRecipeOnDevice:function(e){return function(t,n){n().bluetooth.server.getPrimaryService(we).then((function(e){return e.getCharacteristic("dad54501-2ee3-6213-624a-aeca328f132a")})).then((function(t){var n=new ArrayBuffer(20);new DataView(n).setInt8(0,18,!0),new DataView(n).setInt32(1,Number(e),!0),console.log("%ccommand:","color:green; font-size:2em; border-top:10px solid red"),console.log(new Int8Array(n)),setTimeout((function(){t.writeValue(new Int8Array(n))}),1e3)})).catch((function(e){console.log("ERROR - WV command: ",e)}))}}},Bt=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onClose,a=t.writeRecipeToDevice,c=t.recipesOnDevice,o=t.updateRecipeOnDevice,i=this.props.recipes.map((function(t){return r.a.createElement(It.a,{key:t.id,title:r.a.createElement("div",null,c[t.id]?r.a.createElement("h3",null,r.a.createElement(Dt.a,{twoToneColor:"#52c41a"}),r.a.createElement(ge.a,{type:"vertical"}),t.name+" \u2116"+t.id):r.a.createElement("h3",null,t.name+" \u2116"+t.id),r.a.createElement("p",null,"Version "+t.version)),style:{width:250},cover:r.a.createElement("img",{alt:"example",src:t.image.replace("http://","https://")}),className:"recipe__card"},r.a.createElement("p",null,t.description),e.props.buttonVisible&&r.a.createElement(v.a,{onClick:function(){n(),a(t.id)}},"Add"),r.a.createElement(v.a,{onClick:function(){o(t.id)}},"Update"))}));return r.a.createElement(he.a,{gutter:16},i)}}]),n}(a.Component),Pt=Object(i.b)((function(e){return{token:e.auth.token,recipesOnDevice:e.data.recipesOnDevice}}),Nt)(Bt),xt={recipe:U,user:V,userDevices:function(){return function(e,t){e(D()),e(y(!0));var n=t().auth.cookie.access_token;E.a.get("user/devices/",{headers:{Authorization:"Bearer ".concat(n)}}).then((function(t){e(N(t.data)),e(y(!1))})).catch((function(){e(B()),e(y(!1))}))}},logout:function(){return function(e){e(R());try{t="auth_cookie",(new j.a).remove(t),e(I())}catch(n){e(w()),console.log("logout",n.message)}var t}}},Gt=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={current:"devices",showDrawer:!1},e.showDrawer=function(){e.setState({showDrawer:!0})},e.onClose=function(){e.setState({showDrawer:!1})},e.handleClick=function(t){e.setState({current:t.key})},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.recipe,n=e.user,a=e.userDevices;t(),n(),a()}},{key:"render",value:function(){var e=this.state.current,t=this.props,n=t.data,a=n.user,c=n.recipe,o=n.userDevices,i=t.logout;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"elements__account"},r.a.createElement(le.a,{title:r.a.createElement("div",{className:"account-header"},a&&a.first_name+" "+a.last_name,r.a.createElement("button",{onClick:i},"Logout"))},r.a.createElement(fe.a,{onClick:this.handleClick,selectedKeys:[e],mode:"horizontal"},r.a.createElement(fe.a.Item,{key:"devices",icon:r.a.createElement(be.a,null)},"My devices"),r.a.createElement(fe.a.Item,{key:"recipes",icon:r.a.createElement(ve.a,null)},"Recipes"))),"devices"===this.state.current?r.a.createElement(Vt,{devices:o&&o.devices,showDrawer:this.showDrawer}):r.a.createElement(Pt,{recipes:c,buttonVisible:!1,onClose:this.onClose}),r.a.createElement(de.a,{title:"Recipes",width:320,placement:"right",closable:!1,onClose:this.onClose,visible:this.state.showDrawer},r.a.createElement(Pt,{recipes:c,buttonVisible:!0,onClose:this.onClose}))))}}]),n}(a.Component),Ht=Object(i.b)((function(e){return{token:e.auth.token,data:e.data}}),xt)(Gt),zt=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(b.a,{title:r.a.createElement("h1",null,"Your browser is not supported Web Bluetooth"),extra:r.a.createElement(v.a,{type:"primary",key:"console",href:"https://www.google.com/chrome/"},"Download Google Chrome")})}}]),n}(a.Component),qt={fetchTokenSuccess:S},Mt=function(e){Object(l.a)(n,e);var t=Object(f.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"componentWillMount",value:function(){var e,t=this.props.fetchTokenSuccess,n=(e="auth_cookie",(new j.a).get(e));n&&(console.log("%ccookie:","color:green; font-size:2em; border-top:10px solid red"),console.log(n),t(n))}},{key:"render",value:function(){var e=this.props,t=e.cookie,n=e.showPreloader;return navigator.bluetooth||Object(d.d)("/bluetooth-not-available"),t.access_token||Object(d.d)("/"),r.a.createElement(r.a.Fragment,null,n&&r.a.createElement(K,null),r.a.createElement(d.c,null,t.access_token&&r.a.createElement(d.b,{from:"/",to:"account",noThrow:!0}),r.a.createElement(ue,{path:"/"}),r.a.createElement(Ht,{path:"account"}),r.a.createElement(zt,{path:"bluetooth-not-available"}),r.a.createElement(b.a,{default:!0,status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:r.a.createElement(v.a,{type:"primary"},r.a.createElement(d.a,{to:"/"},"Back Home"))})))}}]),n}(a.Component),Qt=Object(i.b)((function(e){return{cookie:e.auth.cookie,showPreloader:e.settings.showPreloader}}),qt)(Mt),Wt=n(5),Yt=n(245),Jt={auth:Object(Yt.a)((jt={},Object(ye.a)(jt,S,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{cookie:n})})),Object(ye.a)(jt,I,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{cookie:{}})})),jt),{cookie:{}}),data:Object(Yt.a)((Ct={},Object(ye.a)(Ct,k,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{recipe:n})})),Object(ye.a)(Ct,L,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{user:n})})),Object(ye.a)(Ct,N,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{userDevices:n})})),Object(ye.a)(Ct,M,(function(e,t){var n=t.payload,a=C(n.binary_recipe),r=C(n.binary_image_r400x400);return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeBinary:Object(Wt.a)(Object(Wt.a)({},n),{},{buffer:a,bufferImg:r})})})),Object(ye.a)(Ct,lt,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{byteTransfered:e.byteTransfered+n})})),Object(ye.a)(Ct,ft,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{imgByteTransfered:e.imgByteTransfered+n})})),Object(ye.a)(Ct,dt,(function(e,t){var n=t.payload;return console.log("Speed",n),Object(Wt.a)(Object(Wt.a)({},e),{},{speedOfDataTransfer:isFinite(n)?n:0})})),Object(ye.a)(Ct,x,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{userDevices:n})})),Object(ye.a)(Ct,H,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{userDevices:n})})),Object(ye.a)(Ct,Ke,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{logs:Object.assign({},Object(Wt.a)({},e.logs),{status:"success",data:n})})})),Object(ye.a)(Ct,Xe,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{logs:Object.assign({},Object(Wt.a)({},e.logs),{status:"failure"})})})),Object(ye.a)(Ct,Je,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{logs:Object.assign({},Object(Wt.a)({},e.logs),{status:"request"})})})),Object(ye.a)(Ct,ot,(function(e,t){var n=t.payload.characteristicForWrite;return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeAndImgAreTransfering:{recipeIsTransfering:!0,imgIsTransfering:!1,characteristicForWrite:n,keyI:0}})})),Object(ye.a)(Ct,it,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeAndImgAreTransfering:Object(Wt.a)(Object(Wt.a)({},e.recipeAndImgAreTransfering),{},{recipeIsTransfering:!1,imgIsTransfering:!1,keyI:0})})})),Object(ye.a)(Ct,st,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeAndImgAreTransfering:Object(Wt.a)(Object(Wt.a)({},e.recipeAndImgAreTransfering),{},{recipeIsTransfering:!1,imgIsTransfering:!0,keyI:0})})})),Object(ye.a)(Ct,ut,(function(e){return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeAndImgAreTransfering:{recipeIsTransfering:!1,imgIsTransfering:!1,keyI:0,characteristicForWrite:null}})})),Object(ye.a)(Ct,Be,(function(e,t){var n=t.payload,a=n.recipesIDList,r=n.from,c=Object.assign({},e.recipesOnDevice);switch(r){case"lowPart":return Object(Wt.a)(Object(Wt.a)({},e),{},{recipesOnDevice:a});case"midPart":case"highPart":return Object.keys(a).forEach((function(e){c[e]=a[e]})),Object(Wt.a)(Object(Wt.a)({},e),{},{recipesOnDevice:c})}return Object(Wt.a)({},e)})),Object(ye.a)(Ct,Qe,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{logsTransfering:Object(Wt.a)(Object(Wt.a)({},e.logsTransfering),{},{logs:n.logs})})})),Object(ye.a)(Ct,We,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{logsTransfering:Object(Wt.a)(Object(Wt.a)({},e.logsTransfering),{},{logs:n.logs})})})),Object(ye.a)(Ct,Ye,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{logsTransfering:Object(Wt.a)(Object(Wt.a)({},e.logsTransfering),{},{logs:n.logs})})})),Ct),{recipe:[],user:null,userDevices:null,recipeBinary:null,byteTransfered:0,imgByteTransfered:0,speedOfDataTransfer:0,logs:{status:"success",data:null},recipeAndImgAreTransfering:{recipeIsTransfering:!1,imgIsTransfering:!1,keyI:0,characteristicForWrite:null},logsTransfering:{logs:null,keyI:0},recipesOnDevice:{}}),bluetooth:Object(Yt.a)((yt={},Object(ye.a)(yt,Ue,(function(e,t){var n=t.payload,a=e.devices.slice();return a.push({id:n.id,name:n.name,device:n}),Object(Wt.a)(Object(Wt.a)({},e),{},{device:n,devices:a})})),Object(ye.a)(yt,Pe,(function(e,t){var n=t.payload,a=e.devices.map((function(e){return e.name===n.device.name&&(e.connectionRequest=!0),e}));return Object(Wt.a)(Object(Wt.a)({},e),{},{devices:a,connectionRequest:!0,device:{},server:{},batteryService:null,deviceInfoService:null})})),Object(ye.a)(yt,xe,(function(e,t){var n=t.payload,a=e.devices.map((function(e){return e.name===n.device.name&&(e.connectionRequest=!1,e.server=n.server,e.GATTDisconnected=!1),e}));return Object(Wt.a)(Object(Wt.a)({},e),{},{server:n.server,device:n.device,devices:a,connectionRequest:!1})})),Object(ye.a)(yt,Ge,(function(e,t){var n=t.payload,a=e.devices.map((function(e){return e.name===n.device.name&&(e.GATTDisconnected=!0,e.connectionRequest=!1),e}));return Object(Wt.a)(Object(Wt.a)({},e),{},{devices:a,connectionRequest:!1})})),Object(ye.a)(yt,$e,(function(e,t){var n=t.payload,a=e.batteryService;return Object(Wt.a)(Object(Wt.a)({},e),{},{batteryService:Object(Wt.a)(Object(Wt.a)({},a),n)})})),Object(ye.a)(yt,ct,(function(e,t){var n=t.payload,a=e.deviceInfoService;return Object(Wt.a)(Object(Wt.a)({},e),{},{deviceInfoService:Object(Wt.a)(Object(Wt.a)({},a),n)})})),Object(ye.a)(yt,He,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{dataTransferService:n})})),Object(ye.a)(yt,ze,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{recipeInfoService:n})})),Object(ye.a)(yt,qe,(function(e,t){var n=t.payload;return Object(Wt.a)(Object(Wt.a)({},e),{},{commandService:n})})),yt),{device:{},devices:[],server:{},batteryService:null,deviceInfoService:null,dataTransferService:null,recipeInfoService:null,commandService:null,connectionRequest:!1}),settings:Object(Yt.a)(Object(ye.a)({},y,(function(e,t){var n=t.payload,a=e.preloaderStack.slice();return n?a.push(0):a.shift(),Object(Wt.a)(Object(Wt.a)({},e),{},{showPreloader:!!a.length,preloaderStack:a})})),{showPreloader:!1,preloaderStack:[]})},Kt=n(113),Xt=Object(Kt.b)({immutableCheck:!1,serializableCheck:!1,thunk:!0}),Zt=Object(Kt.a)({reducer:Object(Wt.a)({},Jt),middleware:Xt,devTools:!1});o.a.render(r.a.createElement(i.a,{store:Zt},r.a.createElement(Qt,null)),document.getElementById("root"))}},[[155,1,2]]]);
//# sourceMappingURL=main.ec7fa66a.chunk.js.map